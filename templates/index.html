<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+3:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <title>ZPL para PDF - BarraDoce | Conversor de Etiquetas</title>
    <style>
      :root {
        --cream: #FDF8F3;
        --cream-dark: #F5EDE4;
        --chocolate: #5D4037;
        --chocolate-light: #6B4423;
        --gold: #C9A227;
        --gold-soft: rgba(201, 162, 39, 0.15);
        --caramel: #D4A574;
        --text: #3E2723;
        --text-muted: #6D4C41;
        --border: #D7CCC8;
        --white: #FFFFFF;
        --error: #B71C1C;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Source Sans 3", system-ui, sans-serif;
        background: linear-gradient(180deg, #FDF8F3 0%, #F5EDE4 50%, #EDE0D4 100%);
        color: var(--text);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .card {
        width: 100%;
        max-width: 720px;
        background: var(--white);
        border-radius: 20px;
        padding: 32px 32px 28px;
        border: 1px solid var(--border);
        box-shadow:
          0 4px 24px rgba(93, 64, 55, 0.08),
          0 1px 3px rgba(93, 64, 55, 0.06);
        position: relative;
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--chocolate), var(--gold));
        pointer-events: none;
      }

      .card-inner {
        position: relative;
        z-index: 1;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 16px;
        margin-bottom: 24px;
      }

      .title-group {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .brand-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        color: inherit;
        margin-bottom: 4px;
      }

      .brand-link:hover {
        opacity: 0.85;
      }

      .brand-text {
        font-family: "Playfair Display", Georgia, serif;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--chocolate);
      }

      h1 {
        margin: 0;
        font-size: 1.5rem;
        font-family: "Playfair Display", Georgia, serif;
        font-weight: 600;
        letter-spacing: -0.02em;
        color: var(--chocolate);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .badge {
        font-size: 0.7rem;
        padding: 2px 8px;
        border-radius: 999px;
        background: var(--gold-soft);
        color: var(--chocolate-light);
        border: 1px solid rgba(201, 162, 39, 0.4);
        font-weight: 500;
      }

      .subtitle {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
      }

      .chip {
        font-size: 0.7rem;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        color: var(--text-muted);
        background: var(--cream);
      }

      .logo-mark {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--chocolate), var(--chocolate-light));
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Playfair Display", Georgia, serif;
        font-weight: 700;
        font-size: 1.1rem;
        color: var(--cream);
        box-shadow: 0 4px 12px rgba(93, 64, 55, 0.2);
      }

      form {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .form-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.4fr);
        gap: 16px;
      }

      .section {
        padding: 16px;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--cream);
      }

      .section-title {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-muted);
        margin: 0 0 10px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .section-title span.dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: var(--gold);
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-bottom: 8px;
      }

      label {
        font-size: 0.8rem;
        color: var(--text-muted);
        display: flex;
        justify-content: space-between;
        gap: 6px;
      }

      label span.helper {
        font-weight: 400;
        color: var(--text-muted);
        opacity: 0.9;
      }

      input[type="text"],
      input[type="number"],
      input[type="file"] {
        border-radius: 10px;
        border: 1px solid var(--border);
        background: var(--white);
        color: var(--text);
        font-size: 0.9rem;
        padding: 8px 12px;
        outline: none;
        width: 100%;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      input[type="text"]:focus,
      input[type="number"]:focus,
      input[type="file"]:focus {
        border-color: var(--gold);
        box-shadow: 0 0 0 2px var(--gold-soft);
      }

      input[type="file"] {
        padding: 6px 10px;
        cursor: pointer;
      }

      .hint {
        font-size: 0.72rem;
        color: var(--text-muted);
      }

      .inline-fields {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px;
      }

      .messages {
        margin-bottom: 8px;
      }

      .message {
        font-size: 0.85rem;
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: var(--cream);
      }

      .message.error {
        border-color: rgba(183, 28, 28, 0.4);
        background: #FFEBEE;
        color: var(--error);
      }

      .message.info {
        border-color: rgba(201, 162, 39, 0.3);
        background: var(--cream);
      }

      .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        margin-top: 8px;
      }

      .secondary-text {
        font-size: 0.8rem;
        color: var(--text-muted);
      }

      .secondary-text strong {
        color: var(--chocolate);
        font-weight: 600;
      }

      .footer-link {
        color: var(--chocolate-light);
        text-decoration: none;
        font-weight: 500;
      }

      .footer-link:hover {
        text-decoration: underline;
      }

      button[type="submit"] {
        border: none;
        border-radius: 12px;
        padding: 10px 22px;
        font-size: 0.9rem;
        font-weight: 600;
        letter-spacing: 0.02em;
        cursor: pointer;
        color: var(--white);
        background: linear-gradient(135deg, var(--chocolate), var(--chocolate-light));
        box-shadow: 0 4px 14px rgba(93, 64, 55, 0.3);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button[type="submit"]:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 18px rgba(93, 64, 55, 0.35);
      }

      button[type="submit"]:active {
        transform: translateY(0);
      }

      button .icon {
        width: 18px;
        height: 18px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
      }

      @media (max-width: 720px) {
        .card {
          padding: 20px 18px 18px;
          border-radius: 18px;
        }

        .form-grid {
          grid-template-columns: minmax(0, 1fr);
        }

        .header {
          flex-direction: row;
          align-items: center;
        }

        h1 {
          font-size: 1.25rem;
        }

        .footer {
          flex-direction: column-reverse;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <main class="card">
      <div class="card-inner">
        <header class="header">
          <div class="title-group">
            <a href="https://www.barradoce.com.br" target="_blank" rel="noopener" class="brand-link">
              <span class="brand-text">BarraDoce</span>
            </a>
            <h1>
              ZPL para PDF
              <span class="badge">Etiquetas 2 colunas</span>
            </h1>
            <p class="subtitle">
              Envie o arquivo ZPL, ajuste o tamanho e o deslocamento da segunda
              coluna, e baixe o PDF pronto para impressão.
            </p>
            <div class="chip-row">
              <span class="chip">Upload de arquivo .txt / .zpl</span>
              <span class="chip">Layout 2 colunas padrão</span>
              <span class="chip">Ajuste fino em centímetros</span>
            </div>
          </div>
          <div class="logo-mark">BD</div>
        </header>

        <form method="post" enctype="multipart/form-data">
          <div class="messages">
            {% with messages = get_flashed_messages(with_categories=true) %} {% if
            messages %} {% for category, message in messages %}
            <div
              class="message {% if category == 'error' %}error{% else %}info{% endif %}"
            >
              {{ message }}
            </div>
            {% endfor %} {% else %}
            <div class="message info">
              Use o campo <strong>Deslocamento da 2ª coluna</strong> para alinhar
              as etiquetas da direita, por exemplo:
              <strong>-0,5</strong> cm (esquerda) ou <strong>+0,5</strong> cm
              (direita).
            </div>
            {% endif %} {% endwith %}
          </div>

          <div class="form-grid">
            <section class="section">
              <h2 class="section-title">
                <span class="dot"></span>
                Arquivo ZPL
              </h2>
              <div class="field">
                <label for="zpl_file">
                  Selecionar arquivo
                  <span class="helper">Ex.: Envio-...-Etiquetas-de-produtos.txt</span>
                </label>
                <input
                  id="zpl_file"
                  name="zpl_file"
                  type="file"
                  accept=".txt,.zpl"
                  required
                />
                <div class="hint">
                  O arquivo deve conter comandos ZPL (como ^XA, ^FO, ^BC, ^XZ).
                </div>
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">
                <span class="dot"></span>
                Tamanho da etiqueta
              </h2>
              <div class="inline-fields">
                <div class="field">
                  <label for="width_cm">
                    Largura
                    <span class="helper">cm</span>
                  </label>
                  <input
                    id="width_cm"
                    name="width_cm"
                    type="text"
                    inputmode="decimal"
                    value="{{ default_width }}"
                  />
                  <div class="hint">Padrão: 8,3 cm</div>
                </div>
                <div class="field">
                  <label for="height_cm">
                    Altura
                    <span class="helper">cm</span>
                  </label>
                  <input
                    id="height_cm"
                    name="height_cm"
                    type="text"
                    inputmode="decimal"
                    value="{{ default_height }}"
                  />
                  <div class="hint">Padrão: 2,5 cm</div>
                </div>
              </div>

              <div class="field" style="margin-top: 6px">
                <label for="dpmm">
                  Resolução
                  <span class="helper">pontos por mm (dpmm)</span>
                </label>
                <input
                  id="dpmm"
                  name="dpmm"
                  type="number"
                  min="6"
                  max="24"
                  step="1"
                  value="{{ default_dpmm }}"
                />
                <div class="hint">
                  8 ≈ 203 dpi &middot; 12 ≈ 300 dpi
                </div>
              </div>
            </section>
          </div>

          <section class="section">
            <h2 class="section-title">
              <span class="dot"></span>
              Ajuste da 2ª coluna
            </h2>

            <div class="field">
              <label for="offset_cm">
                Deslocamento horizontal
                <span class="helper">centímetros (cm)</span>
              </label>
              <input
                id="offset_cm"
                name="offset_cm"
                type="text"
                inputmode="decimal"
                value="{{ default_offset }}"
                placeholder="Padrão: 0,3 cm"
              />
              <div class="hint">
                Valores positivos movem a <strong>2ª coluna para a direita</strong>,
                negativos para a <strong>esquerda</strong>. Apenas a coluna da
                direita é alterada (X &gt; metade da largura da etiqueta).
              </div>
            </div>
          </section>

          <div class="footer">
            <p class="secondary-text">
              O PDF gerado terá
              <strong>uma etiqueta por página</strong>, mantendo o layout padrão de
              duas colunas por linha do arquivo ZPL.
              <br />
              <a href="https://www.barradoce.com.br" target="_blank" rel="noopener" class="footer-link">barradoce.com.br</a>
            </p>
            <button type="submit">
              <span class="icon">⮟</span>
              Gerar PDF
            </button>
          </div>
        </form>
      </div>
    </main>
  </body>
</html>

